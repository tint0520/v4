<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tint Maps DEMO</title>
<!-- 🔽 你把這段貼在這裡 🔽 -->

<!-- Favicon 與 PWA App Icon 設定 -->
<link rel="manifest" href="./manifest.json" />
<link rel="apple-touch-icon" href="./img/icon_192.png" />
<link rel="icon" href="./img/icon_192.png" sizes="192x192" />
<link rel="icon" href="./img/icon_512.png" sizes="512x512" />
<meta name="theme-color" content="#ffffff" />

<!-- 🔼 上面貼完之後繼續接著下面這行 🔼 -->
  
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Noto Sans TC', sans-serif;
      height: 100%;
      overflow: hidden;
      background-color: #fefcf9;
    }
    #map {
      position: absolute;
      top: 0;
      bottom: 0;
      right: 0;
      left: 0;
      z-index: 1;
    }
    .bottom-nav {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: #F8F0E2;
  border-radius: 20px;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
  display: flex;
  gap: 28px;
  padding: 10px 20px;
  z-index: 1000;
}
.nav-btn {
  background: none;
  border: none;
  padding: 6px;
  border-radius: 50%;
  transition: background 0.3s ease;
}
/* .nav-btn:hover {
  background: rgba(0, 0, 0, 0.04);
} */

  .card-container {
  position: absolute;
  bottom: 100px;
  left: 0;
  right: 0;
  z-index: 5;
  overflow-x: auto; /* ✅ 改為讓整個區塊可橫向滑動 */
  -webkit-overflow-scrolling: touch;
  pointer-events: all;
}

.card-wrapper {
  display: flex;
  gap: 12px;
  padding: 0 20px;
  min-width: max-content; /* ✅ 自動撐開寬度以容納所有卡片 */
  scroll-snap-type: x mandatory;
}

.store-card {
  flex: 0 0 auto; /* ✅ 確保每張卡片不被壓縮 */
  width: 280px;
  scroll-snap-align: center;
  background: #fffdf9;
  border-radius: 16px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.08);
  padding: 16px;
  transition: transform 0.3s ease;
  cursor: pointer;
}
    .card-photo {
  width: 100%;
  height: 160px;
  object-fit: cover;
  border-radius: 12px;
  margin-bottom: 10px;
}
    .store-card .title {
  font-weight: 700;
  font-size: 18px; /* ✅ 加大一階 */
  margin-bottom: 6px;
  color: #3e2e26; /* ✅ 可選：讓顏色再深一點點 */
}
    .store-card .info {
      font-size: 14px;
      color: #7d756c;
    }
   .floating-window {
  position: fixed;
  bottom: 100px;
  left: 50%;
  transform: translateX(-50%) translateY(100%);
  background: #ffffff;
  width: 300px; /* ✅ 改成固定寬度與選單一致 */
  border-radius: 16px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.12);
  padding: 20px;
  z-index: 20;
  opacity: 0;
  transition: transform 0.3s ease, opacity 0.3s ease;
}
    .floating-window.active {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
    .floating-window .close-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      background: none;
      border: none;
      font-size: 18px;
      color: #999;
      cursor: pointer;
    }

    /* Scroll bar hidden for webkit */
    .card-wrapper::-webkit-scrollbar {
      display: none;
    }

/* ✅ 新增 GPS 定位按鈕樣式 */
.gps-btn {
  position: absolute;
  top: 20px;
  right: 20px;
  background: #ffffff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  padding: 6px;
  z-index: 999;
  cursor: pointer;
  transition: background 0.3s ease;
}

.gps-btn:hover {
  background: #f2f2f2;
}
    
  </style>
</head>
<body>
  <div id="map"></div>
<button id="gpsButton" class="gps-btn" onclick="centerOnGPS()" title="定位到我">
  <img src="./img/icon_gps.png" alt="定位" width="36" height="36" />
</button>

    <!-- 店家卡片滑動容器 -->
  <div class="card-container">
    <div class="card-wrapper" id="cardWrapper">
      <!-- JS會動態插入卡片 -->
    </div>
  </div>

  <!-- 浮窗區塊：搜尋 / 收藏 / 選單 -->
  <div id="searchWindow" class="floating-window">
    <button class="close-btn" onclick="closeWindow('searchWindow')">×</button>
    <h3>搜尋與篩選</h3>
    <input type="text" placeholder="搜尋地區、關鍵字..." style="width:100%;padding:10px;border-radius:8px;border:1px solid #ccc;margin:12px 0;" />
    <p style="font-size:14px;color:#666;">可篩選：地區 / 類型 / 預約方式</p>
  </div>
  <div id="favoriteWindow" class="floating-window">
    <button class="close-btn" onclick="closeWindow('favoriteWindow')">×</button>
    <h3>收藏清單</h3>
    <p>尚無收藏的店家</p>
  </div>
  <div id="menuWindow" class="floating-window">
    <button class="close-btn" onclick="closeWindow('menuWindow')">×</button>
    <h3>更多選項</h3>
    <p>功能建置中</p>
  </div>

  <!-- 底部選單 -->
 <div class="bottom-nav">
  <!-- 🔍 搜尋 -->
  <button class="nav-btn" onclick="toggleWindow('searchWindow')">
    <img src="./img/icon_search.png" alt="搜尋" width="30" height="30" />
  </button>

  <!-- 🧊 篩選 -->
  <button class="nav-btn" onclick="toggleWindow('filterWindow')">
    <img src="./img/icon_filter.png" alt="篩選" width="30" height="30" />
  </button>

  <!-- 🏠 首頁 -->
  <button class="nav-btn" onclick="closeExpandedCard()">
    <img src="./img/icon_home.png" alt="首頁" width="30" height="30" />
  </button>

  <!-- ❤️ 收藏 -->
  <button class="nav-btn" onclick="toggleWindow('favoriteWindow')">
    <img src="./img/icon_heart.png" alt="收藏" width="30" height="30" />
  </button>

  <!-- ☰ 漢堡選單 -->
  <button class="nav-btn" onclick="toggleWindow('menuWindow')">
    <img src="./img/icon_menu.png" alt="選單" width="30" height="30" />
  </button>
</div>

  <!-- Google Maps JS + 假資料與互動邏輯 -->
  <script>
    let map, userMarker, activeIndex = 0;
    const stores = [
       {
    name: '柔柔美甲小舖',
    lat: 25.0452, lng: 121.5318,
    image: 'https://images.unsplash.com/photo-1606312619344-500082ba8de6',
    time: '11:00 - 20:00',
    services: '美甲 / 凝膠 / 手護理',
    reservation: 'LINE 預約',
    region: '台北市大安區',
    distance: '300m',
    intro: '一間專屬女生的柔美空間，提供高質感凝膠造型與客製設計。',
    ig: 'https://instagram.com',
    line: 'https://line.me',
    nav: 'https://maps.google.com?q=25.0452,121.5318',
    book: '#'
  },
  {
    name: '小南美睫空間',
    lat: 24.1477, lng: 120.6736,
    image: 'https://images.unsplash.com/photo-1594737625785-cdfebd7a9d0a',
    time: '10:00 - 19:00',
    services: '日式美睫 / 卸睫 / 保養',
    reservation: 'IG 私訊',
    region: '台中市西區',
    distance: '1.2km',
    intro: '專業美睫師為您打造自然感電眼，舒適空間放鬆享受。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '粉棕工作室',
    lat: 22.6273, lng: 120.3014,
    image: 'https://images.unsplash.com/photo-1589998059171-988d887df646',
    time: '12:00 - 21:00',
    services: '美甲 / 預約制 / 獨立空間',
    reservation: '表單填寫',
    region: '高雄市新興區',
    distance: '2.0km',
    intro: '藏身市中心的秘密工作室，適合享受靜謐服務的妳。',
    ig: '#', line: '#', nav: '#', book: '#'
  },  {
    name: '琉璃美甲藝術',
    lat: 25.0329, lng: 121.5654,
    image: 'https://images.unsplash.com/photo-1604014238631-76e91f3b0b7f',
    time: '10:30 - 20:00',
    services: '凝膠彩繪 / 基礎保養',
    reservation: 'LINE 預約',
    region: '台北市信義區',
    distance: '600m',
    intro: '主打手繪凝膠彩繪，每雙手都是獨一無二的藝術品。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '小月光睫毛設計',
    lat: 24.9921, lng: 121.3017,
    image: 'https://images.unsplash.com/photo-1603575447658-3ef16d346c45',
    time: '09:00 - 18:00',
    services: '韓式睫毛 / 睫毛嫁接 / 卸睫',
    reservation: 'IG 私訊',
    region: '桃園市中壢區',
    distance: '850m',
    intro: '打造專屬你的清新妝感，輕盈自然無負擔。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '光森美學空間',
    lat: 23.4801, lng: 120.4536,
    image: 'https://images.unsplash.com/photo-1590080876211-bc0cb9bd7521',
    time: '13:00 - 21:00',
    services: '手足保養 / 蠟除毛',
    reservation: '表單填寫',
    region: '雲林縣斗六市',
    distance: '2.4km',
    intro: '藏匿在老街巷內的放鬆天地，專屬預約制服務。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '棉花糖工作坊',
    lat: 24.8041, lng: 120.9711,
    image: 'https://images.unsplash.com/photo-1624812178297-6b1f2e007064',
    time: '11:00 - 20:00',
    services: '粉嫩凝膠 / 手部彩繪',
    reservation: 'LINE 預約',
    region: '新竹市東區',
    distance: '1.1km',
    intro: '風格溫柔清新，適合喜愛少女色調的你。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '米花造型沙龍',
    lat: 25.0840, lng: 121.5655,
    image: 'https://images.unsplash.com/photo-1588776814546-b1d2b5dc726b',
    time: '10:00 - 19:00',
    services: '造型剪髮 / 護髮',
    reservation: 'IG 預約連結',
    region: '台北市松山區',
    distance: '500m',
    intro: '結合日系設計與個人風格，專屬的髮型提案。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '香氛指間',
    lat: 22.9981, lng: 120.2269,
    image: 'https://images.unsplash.com/photo-1612109378622-594f57f37c15',
    time: '12:00 - 21:00',
    services: '指緣保養 / 芳療護理',
    reservation: 'LINE 私訊',
    region: '台南市北區',
    distance: '1.8km',
    intro: '結合天然香氛與手部護理，療癒你的身心。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '星語睫毛小館',
    lat: 24.1479, lng: 120.6736,
    image: 'https://images.unsplash.com/photo-1588775567580-eed9516271ce',
    time: '11:30 - 20:30',
    services: '自然款睫毛 / 純手工接睫',
    reservation: '表單填寫',
    region: '台中市西區',
    distance: '950m',
    intro: '不誇張卻精緻，重現眼神的靈魂。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '蘿拉美甲居所',
    lat: 23.4803, lng: 120.4489,
    image: 'https://images.unsplash.com/photo-1625671035177-2e9b2b5bb02c',
    time: '13:00 - 22:00',
    services: '凝膠 / 延甲 / 貓眼設計',
    reservation: 'LINE 預約',
    region: '雲林縣斗六市',
    distance: '2.6km',
    intro: '專精貓眼與延甲技術，閃耀你的每一日。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '奶油日常',
    lat: 25.0451, lng: 121.5121,
    image: 'https://images.unsplash.com/photo-1610477291273-9202e5a87225',
    time: '10:00 - 20:00',
    services: '法式凝膠 / 保養護理',
    reservation: 'IG 私訊',
    region: '台北市中正區',
    distance: '700m',
    intro: '簡約生活中的柔軟小確幸。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '雲間美學',
    lat: 22.6272, lng: 120.3016,
    image: 'https://images.unsplash.com/photo-1599940824391-8f2a7d52935c',
    time: '10:30 - 19:00',
    services: '個性凝膠 / 彩繪造型',
    reservation: 'LINE 聯絡',
    region: '高雄市前金區',
    distance: '1.3km',
    intro: '自由靈魂的顏色實驗室，妳的風格妳來定義。',
    ig: '#', line: '#', nav: '#', book: '#'
  },  {
    name: '橘光工作室',
    lat: 24.9555, lng: 121.2167,
    image: 'https://images.unsplash.com/photo-1607746882042-944635dfe10e',
    time: '09:30 - 18:30',
    services: '極簡美甲 / 指緣修護',
    reservation: 'LINE 預約',
    region: '新竹縣竹北市',
    distance: '1.6km',
    intro: '簡約中見精緻，喜歡自然感的妳會愛上。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '芽芽睫毛坊',
    lat: 24.1641, lng: 120.6361,
    image: 'https://images.unsplash.com/photo-1587005065981-1e8e682938d6',
    time: '12:00 - 21:00',
    services: '濃密接睫 / 睫毛護理',
    reservation: 'IG 預約連結',
    region: '台中市南區',
    distance: '2.1km',
    intro: '專屬客製眼型搭配，自然與濃密兼具。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '繭居 Nail&Life',
    lat: 23.9739, lng: 120.9820,
    image: 'https://images.unsplash.com/photo-1594561465259-fbc0d3016c56',
    time: '14:00 - 22:00',
    services: '療癒系美甲 / 自然護理',
    reservation: 'LINE 預約',
    region: '南投市',
    distance: '3.4km',
    intro: '像繭一樣溫柔包覆的美學小天地。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '晴子工作坊',
    lat: 22.6208, lng: 120.3123,
    image: 'https://images.unsplash.com/photo-1615371959759-47349de4b3ae',
    time: '10:00 - 19:30',
    services: '指尖設計 / 清新風格',
    reservation: '表單填寫',
    region: '高雄市苓雅區',
    distance: '1.9km',
    intro: '每次造訪都像陽光灑進心裡，充滿能量的空間。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '莓果甜心美甲',
    lat: 25.0173, lng: 121.4637,
    image: 'https://images.unsplash.com/photo-1599945468073-c844865d55ce',
    time: '11:00 - 21:00',
    services: '少女系凝膠 / 彩繪貼紙',
    reservation: 'IG 私訊',
    region: '新北市板橋區',
    distance: '950m',
    intro: '夢幻少女心集散地，粉嫩控的天堂。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '小井 Nail Life',
    lat: 23.6981, lng: 120.5348,
    image: 'https://images.unsplash.com/photo-1588776813716-35aee4eb865a',
    time: '13:00 - 21:00',
    services: '極簡風 / 客製彩繪',
    reservation: 'LINE 預約',
    region: '彰化縣員林市',
    distance: '2.9km',
    intro: '在小井遇見溫柔，設計從妳的故事出發。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '樂樂日式美睫',
    lat: 24.9715, lng: 121.1911,
    image: 'https://images.unsplash.com/photo-1606112219348-204d7d8b94ee',
    time: '09:00 - 18:00',
    services: '輕感睫毛 / 日式分段技法',
    reservation: 'LINE 預約',
    region: '桃園市楊梅區',
    distance: '1.2km',
    intro: '注重舒適與質感兼具的日式睫毛專門店。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '喵喵 Nail Lab',
    lat: 24.8138, lng: 121.0291,
    image: 'https://images.unsplash.com/photo-1590080876211-bc0cb9bd7521',
    time: '12:00 - 21:30',
    services: '手足凝膠 / 動物圖案',
    reservation: 'IG 私訊',
    region: '新竹市北區',
    distance: '800m',
    intro: '主打可愛手繪動物圖樣，喜歡貓貓狗狗看這邊！',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '島光美甲',
    lat: 23.5692, lng: 119.5797,
    image: 'https://images.unsplash.com/photo-1625187494659-b3f91a3b1ff5',
    time: '10:30 - 19:30',
    services: '凝膠指彩 / 海系風格',
    reservation: '表單預約',
    region: '澎湖縣馬公市',
    distance: '5.1km',
    intro: '靈感來自島嶼日光，專屬你的夏日色彩。',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: '空白美睫所',
    lat: 25.0517, lng: 121.5380,
    image: 'https://images.unsplash.com/photo-1613565438585-d90a6fa9c8a6',
    time: '11:00 - 20:00',
    services: '輕羽接睫 / 眼型設計',
    reservation: 'LINE 預約',
    region: '台北市中山區',
    distance: '350m',
    intro: '極簡系睫毛空間，讓妳的眼神保有純粹。',
    ig: '#', line: '#', nav: '#', book: '#'
  }
    ];
    const markers = [];

    function initMap() {
      navigator.geolocation.getCurrentPosition(pos => {
        const userPos = {
          lat: pos.coords.latitude,
          lng: pos.coords.longitude
        };
        map = new google.maps.Map(document.getElementById('map'), {
          center: userPos, zoom: 14,
        });
        userMarker = new google.maps.Marker({
          position: userPos,
          map: map,
          title: '你在這裡',
          icon: {
            path: google.maps.SymbolPath.CIRCLE,
            scale: 8,
            fillColor: '#4285F4',
            fillOpacity: 1,
            strokeWeight: 2,
            strokeColor: '#fff'
          }
        });
        stores.forEach((store, index) => {
          const marker = new google.maps.Marker({
            position: { lat: store.lat, lng: store.lng },
            map: map,
            title: store.name
          });
          markers.push(marker);
        });
        renderCards();
        updateCardUI(0);
        // 🔁 滑動卡片時自動偵測對應卡片，並更新地圖中心與資料
document.getElementById('cardWrapper').addEventListener('scroll', function () {
  const wrapper = this;
  const cards = wrapper.querySelectorAll('.store-card');
  let minDistance = Infinity;
  let closestIndex = 0;

  cards.forEach((card, index) => {
    const cardCenter = card.getBoundingClientRect().left + card.offsetWidth / 2;
    const wrapperCenter = wrapper.getBoundingClientRect().left + wrapper.offsetWidth / 2;
    const distance = Math.abs(cardCenter - wrapperCenter);
    if (distance < minDistance) {
      minDistance = distance;
      closestIndex = index;
    }
  });

  // 若滑動到新卡片就更新地圖位置
  if (closestIndex !== activeIndex) {
    updateCardUI(closestIndex, true);
  }
});
      });
    }

    function renderCards() {
      const wrapper = document.getElementById('cardWrapper');
      stores.forEach((s, i) => {
        const div = document.createElement('div');
        div.className = 'store-card';
div.innerHTML = `
 <img src="${s.image}" class="card-photo" />
  <div class="title">${s.name}</div>
  <div class="info">時間：${s.time}</div>
  <div class="info">服務：${s.services}</div>
  <div class="info">預約：${s.reservation}</div>
  <div class="info">${s.distance}・${s.region}</div>
`;
        div.onclick = () => updateCardUI(i, true);
        wrapper.appendChild(div);
      });
    }

    function updateCardUI(index, open = false) {
      activeIndex = index;
      const s = stores[index];
      map.panTo({ lat: s.lat, lng: s.lng });

} 

   function toggleWindow(id) {
  const target = document.getElementById(id);
  const isOpen = target.classList.contains('active');

  // 如果原本沒開，就開；已開就收起
  if (!isOpen) {
    target.classList.add('active');
  }
}

    function closeWindow(id) {
      document.getElementById(id).classList.remove('active');
    }

    function centerOnGPS() {
      if (navigator.geolocation && map) {
        navigator.geolocation.getCurrentPosition(pos => {
          const userPos = { lat: pos.coords.latitude, lng: pos.coords.longitude };
          map.setCenter(userPos);
        });
      }
    }
    // DEBUG: 強制展開第一筆卡片來確認展開卡片是否有作用
window.addEventListener('load', () => {
  setTimeout(() => {
    updateCardUI(0);
  }, 1000);
});

    
  </script>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBLCB3EKFwsIqPwEEL_hxL7zluVpnzcCNM&callback=initMap"></script>
</body>
</html>
