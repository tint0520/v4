<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tint Maps DEMO</title>
<!-- ğŸ”½ ä½ æŠŠé€™æ®µè²¼åœ¨é€™è£¡ ğŸ”½ -->

<!-- Favicon èˆ‡ PWA App Icon è¨­å®š -->
<link rel="manifest" href="./manifest.json" />
<link rel="apple-touch-icon" href="./img/icon_192.png" />
<link rel="icon" href="./img/icon_192.png" sizes="192x192" />
<link rel="icon" href="./img/icon_512.png" sizes="512x512" />
<meta name="theme-color" content="#ffffff" />

<!-- ğŸ”¼ ä¸Šé¢è²¼å®Œä¹‹å¾Œç¹¼çºŒæ¥è‘—ä¸‹é¢é€™è¡Œ ğŸ”¼ -->
  
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Noto Sans TC', sans-serif;
      height: 100%;
      overflow: hidden;
      background-color: #fefcf9;
    }
    #map {
      position: absolute;
      top: 0;
      bottom: 0;
      right: 0;
      left: 0;
      z-index: 1;
    }
    .bottom-nav {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: #F8F0E2;
  border-radius: 20px;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
  display: flex;
  gap: 28px;
  padding: 10px 20px;
  z-index: 1000;
}
.nav-btn {
  background: none;
  border: none;
  padding: 6px;
  border-radius: 50%;
  transition: background 0.3s ease;
}
/* .nav-btn:hover {
  background: rgba(0, 0, 0, 0.04);
} */

  .card-container {
  position: absolute;
  bottom: 100px;
  left: 0;
  right: 0;
  z-index: 5;
  overflow-x: auto; /* âœ… æ”¹ç‚ºè®“æ•´å€‹å€å¡Šå¯æ©«å‘æ»‘å‹• */
  -webkit-overflow-scrolling: touch;
  pointer-events: all;
}

.card-wrapper {
  display: flex;
  gap: 12px;
  padding: 0 20px;
  min-width: max-content; /* âœ… è‡ªå‹•æ’é–‹å¯¬åº¦ä»¥å®¹ç´æ‰€æœ‰å¡ç‰‡ */
  scroll-snap-type: x mandatory;
}

.store-card {
  flex: 0 0 auto; /* âœ… ç¢ºä¿æ¯å¼µå¡ç‰‡ä¸è¢«å£“ç¸® */
  width: 280px;
  scroll-snap-align: center;
  background: #fffdf9;
  border-radius: 16px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.08);
  padding: 16px;
  transition: transform 0.3s ease;
  cursor: pointer;
}
    .card-photo {
  width: 100%;
  height: 160px;
  object-fit: cover;
  border-radius: 12px;
  margin-bottom: 10px;
}
    .store-card .title {
  font-weight: 700;
  font-size: 18px; /* âœ… åŠ å¤§ä¸€éš */
  margin-bottom: 6px;
  color: #3e2e26; /* âœ… å¯é¸ï¼šè®“é¡è‰²å†æ·±ä¸€é»é» */
}
    .store-card .info {
      font-size: 14px;
      color: #7d756c;
    }
   .floating-window {
  position: fixed;
  bottom: 100px;
  left: 50%;
  transform: translateX(-50%) translateY(100%);
  background: #ffffff;
  width: 300px; /* âœ… æ”¹æˆå›ºå®šå¯¬åº¦èˆ‡é¸å–®ä¸€è‡´ */
  border-radius: 16px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.12);
  padding: 20px;
  z-index: 20;
  opacity: 0;
  transition: transform 0.3s ease, opacity 0.3s ease;
}
    .floating-window.active {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
    .floating-window .close-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      background: none;
      border: none;
      font-size: 18px;
      color: #999;
      cursor: pointer;
    }

    /* Scroll bar hidden for webkit */
    .card-wrapper::-webkit-scrollbar {
      display: none;
    }

/* âœ… æ–°å¢ GPS å®šä½æŒ‰éˆ•æ¨£å¼ */
.gps-btn {
  position: absolute;
  top: 20px;
  right: 20px;
  background: #ffffff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  padding: 6px;
  z-index: 999;
  cursor: pointer;
  transition: background 0.3s ease;
}

.gps-btn:hover {
  background: #f2f2f2;
}
    
  </style>
</head>
<body>
  <div id="map"></div>
<button id="gpsButton" class="gps-btn" onclick="centerOnGPS()" title="å®šä½åˆ°æˆ‘">
  <img src="./img/icon_gps.png" alt="å®šä½" width="36" height="36" />
</button>

    <!-- åº—å®¶å¡ç‰‡æ»‘å‹•å®¹å™¨ -->
  <div class="card-container">
    <div class="card-wrapper" id="cardWrapper">
      <!-- JSæœƒå‹•æ…‹æ’å…¥å¡ç‰‡ -->
    </div>
  </div>

  <!-- æµ®çª—å€å¡Šï¼šæœå°‹ / æ”¶è— / é¸å–® -->
  <div id="searchWindow" class="floating-window">
    <button class="close-btn" onclick="closeWindow('searchWindow')">Ã—</button>
    <h3>æœå°‹èˆ‡ç¯©é¸</h3>
    <input type="text" placeholder="æœå°‹åœ°å€ã€é—œéµå­—..." style="width:100%;padding:10px;border-radius:8px;border:1px solid #ccc;margin:12px 0;" />
    <p style="font-size:14px;color:#666;">å¯ç¯©é¸ï¼šåœ°å€ / é¡å‹ / é ç´„æ–¹å¼</p>
  </div>
  <div id="favoriteWindow" class="floating-window">
    <button class="close-btn" onclick="closeWindow('favoriteWindow')">Ã—</button>
    <h3>æ”¶è—æ¸…å–®</h3>
    <p>å°šç„¡æ”¶è—çš„åº—å®¶</p>
  </div>
  <div id="menuWindow" class="floating-window">
    <button class="close-btn" onclick="closeWindow('menuWindow')">Ã—</button>
    <h3>æ›´å¤šé¸é …</h3>
    <p>åŠŸèƒ½å»ºç½®ä¸­</p>
  </div>

  <!-- åº•éƒ¨é¸å–® -->
 <div class="bottom-nav">
  <!-- ğŸ” æœå°‹ -->
  <button class="nav-btn" onclick="toggleWindow('searchWindow')">
    <img src="./img/icon_search.png" alt="æœå°‹" width="30" height="30" />
  </button>

  <!-- ğŸ§Š ç¯©é¸ -->
  <button class="nav-btn" onclick="toggleWindow('filterWindow')">
    <img src="./img/icon_filter.png" alt="ç¯©é¸" width="30" height="30" />
  </button>

  <!-- ğŸ  é¦–é  -->
  <button class="nav-btn" onclick="closeExpandedCard()">
    <img src="./img/icon_home.png" alt="é¦–é " width="30" height="30" />
  </button>

  <!-- â¤ï¸ æ”¶è— -->
  <button class="nav-btn" onclick="toggleWindow('favoriteWindow')">
    <img src="./img/icon_heart.png" alt="æ”¶è—" width="30" height="30" />
  </button>

  <!-- â˜° æ¼¢å ¡é¸å–® -->
  <button class="nav-btn" onclick="toggleWindow('menuWindow')">
    <img src="./img/icon_menu.png" alt="é¸å–®" width="30" height="30" />
  </button>
</div>

  <!-- Google Maps JS + å‡è³‡æ–™èˆ‡äº’å‹•é‚è¼¯ -->
  <script>
    let map, userMarker, activeIndex = 0;
    const stores = [
       {
    name: 'æŸ”æŸ”ç¾ç”²å°èˆ–',
    lat: 25.0452, lng: 121.5318,
    image: 'https://images.unsplash.com/photo-1606312619344-500082ba8de6',
    time: '11:00 - 20:00',
    services: 'ç¾ç”² / å‡è†  / æ‰‹è­·ç†',
    reservation: 'LINE é ç´„',
    region: 'å°åŒ—å¸‚å¤§å®‰å€',
    distance: '300m',
    intro: 'ä¸€é–“å°ˆå±¬å¥³ç”Ÿçš„æŸ”ç¾ç©ºé–“ï¼Œæä¾›é«˜è³ªæ„Ÿå‡è† é€ å‹èˆ‡å®¢è£½è¨­è¨ˆã€‚',
    ig: 'https://instagram.com',
    line: 'https://line.me',
    nav: 'https://maps.google.com?q=25.0452,121.5318',
    book: '#'
  },
  {
    name: 'å°å—ç¾ç«ç©ºé–“',
    lat: 24.1477, lng: 120.6736,
    image: 'https://images.unsplash.com/photo-1594737625785-cdfebd7a9d0a',
    time: '10:00 - 19:00',
    services: 'æ—¥å¼ç¾ç« / å¸ç« / ä¿é¤Š',
    reservation: 'IG ç§è¨Š',
    region: 'å°ä¸­å¸‚è¥¿å€',
    distance: '1.2km',
    intro: 'å°ˆæ¥­ç¾ç«å¸«ç‚ºæ‚¨æ‰“é€ è‡ªç„¶æ„Ÿé›»çœ¼ï¼Œèˆ’é©ç©ºé–“æ”¾é¬†äº«å—ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'ç²‰æ£•å·¥ä½œå®¤',
    lat: 22.6273, lng: 120.3014,
    image: 'https://images.unsplash.com/photo-1589998059171-988d887df646',
    time: '12:00 - 21:00',
    services: 'ç¾ç”² / é ç´„åˆ¶ / ç¨ç«‹ç©ºé–“',
    reservation: 'è¡¨å–®å¡«å¯«',
    region: 'é«˜é›„å¸‚æ–°èˆˆå€',
    distance: '2.0km',
    intro: 'è—èº«å¸‚ä¸­å¿ƒçš„ç§˜å¯†å·¥ä½œå®¤ï¼Œé©åˆäº«å—éœè¬æœå‹™çš„å¦³ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },  {
    name: 'ç‰ç’ƒç¾ç”²è—è¡“',
    lat: 25.0329, lng: 121.5654,
    image: 'https://images.unsplash.com/photo-1604014238631-76e91f3b0b7f',
    time: '10:30 - 20:00',
    services: 'å‡è† å½©ç¹ª / åŸºç¤ä¿é¤Š',
    reservation: 'LINE é ç´„',
    region: 'å°åŒ—å¸‚ä¿¡ç¾©å€',
    distance: '600m',
    intro: 'ä¸»æ‰“æ‰‹ç¹ªå‡è† å½©ç¹ªï¼Œæ¯é›™æ‰‹éƒ½æ˜¯ç¨ä¸€ç„¡äºŒçš„è—è¡“å“ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'å°æœˆå…‰ç«æ¯›è¨­è¨ˆ',
    lat: 24.9921, lng: 121.3017,
    image: 'https://images.unsplash.com/photo-1603575447658-3ef16d346c45',
    time: '09:00 - 18:00',
    services: 'éŸ“å¼ç«æ¯› / ç«æ¯›å«æ¥ / å¸ç«',
    reservation: 'IG ç§è¨Š',
    region: 'æ¡ƒåœ’å¸‚ä¸­å£¢å€',
    distance: '850m',
    intro: 'æ‰“é€ å°ˆå±¬ä½ çš„æ¸…æ–°å¦æ„Ÿï¼Œè¼•ç›ˆè‡ªç„¶ç„¡è² æ“”ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'å…‰æ£®ç¾å­¸ç©ºé–“',
    lat: 23.4801, lng: 120.4536,
    image: 'https://images.unsplash.com/photo-1590080876211-bc0cb9bd7521',
    time: '13:00 - 21:00',
    services: 'æ‰‹è¶³ä¿é¤Š / è Ÿé™¤æ¯›',
    reservation: 'è¡¨å–®å¡«å¯«',
    region: 'é›²æ—ç¸£æ–—å…­å¸‚',
    distance: '2.4km',
    intro: 'è—åŒ¿åœ¨è€è¡—å··å…§çš„æ”¾é¬†å¤©åœ°ï¼Œå°ˆå±¬é ç´„åˆ¶æœå‹™ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'æ£‰èŠ±ç³–å·¥ä½œåŠ',
    lat: 24.8041, lng: 120.9711,
    image: 'https://images.unsplash.com/photo-1624812178297-6b1f2e007064',
    time: '11:00 - 20:00',
    services: 'ç²‰å«©å‡è†  / æ‰‹éƒ¨å½©ç¹ª',
    reservation: 'LINE é ç´„',
    region: 'æ–°ç«¹å¸‚æ±å€',
    distance: '1.1km',
    intro: 'é¢¨æ ¼æº«æŸ”æ¸…æ–°ï¼Œé©åˆå–œæ„›å°‘å¥³è‰²èª¿çš„ä½ ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'ç±³èŠ±é€ å‹æ²™é¾',
    lat: 25.0840, lng: 121.5655,
    image: 'https://images.unsplash.com/photo-1588776814546-b1d2b5dc726b',
    time: '10:00 - 19:00',
    services: 'é€ å‹å‰ªé«® / è­·é«®',
    reservation: 'IG é ç´„é€£çµ',
    region: 'å°åŒ—å¸‚æ¾å±±å€',
    distance: '500m',
    intro: 'çµåˆæ—¥ç³»è¨­è¨ˆèˆ‡å€‹äººé¢¨æ ¼ï¼Œå°ˆå±¬çš„é«®å‹ææ¡ˆã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'é¦™æ°›æŒ‡é–“',
    lat: 22.9981, lng: 120.2269,
    image: 'https://images.unsplash.com/photo-1612109378622-594f57f37c15',
    time: '12:00 - 21:00',
    services: 'æŒ‡ç·£ä¿é¤Š / èŠ³ç™‚è­·ç†',
    reservation: 'LINE ç§è¨Š',
    region: 'å°å—å¸‚åŒ—å€',
    distance: '1.8km',
    intro: 'çµåˆå¤©ç„¶é¦™æ°›èˆ‡æ‰‹éƒ¨è­·ç†ï¼Œç™‚ç™’ä½ çš„èº«å¿ƒã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'æ˜Ÿèªç«æ¯›å°é¤¨',
    lat: 24.1479, lng: 120.6736,
    image: 'https://images.unsplash.com/photo-1588775567580-eed9516271ce',
    time: '11:30 - 20:30',
    services: 'è‡ªç„¶æ¬¾ç«æ¯› / ç´”æ‰‹å·¥æ¥ç«',
    reservation: 'è¡¨å–®å¡«å¯«',
    region: 'å°ä¸­å¸‚è¥¿å€',
    distance: '950m',
    intro: 'ä¸èª‡å¼µå»ç²¾ç·»ï¼Œé‡ç¾çœ¼ç¥çš„éˆé­‚ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'è˜¿æ‹‰ç¾ç”²å±…æ‰€',
    lat: 23.4803, lng: 120.4489,
    image: 'https://images.unsplash.com/photo-1625671035177-2e9b2b5bb02c',
    time: '13:00 - 22:00',
    services: 'å‡è†  / å»¶ç”² / è²“çœ¼è¨­è¨ˆ',
    reservation: 'LINE é ç´„',
    region: 'é›²æ—ç¸£æ–—å…­å¸‚',
    distance: '2.6km',
    intro: 'å°ˆç²¾è²“çœ¼èˆ‡å»¶ç”²æŠ€è¡“ï¼Œé–ƒè€€ä½ çš„æ¯ä¸€æ—¥ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'å¥¶æ²¹æ—¥å¸¸',
    lat: 25.0451, lng: 121.5121,
    image: 'https://images.unsplash.com/photo-1610477291273-9202e5a87225',
    time: '10:00 - 20:00',
    services: 'æ³•å¼å‡è†  / ä¿é¤Šè­·ç†',
    reservation: 'IG ç§è¨Š',
    region: 'å°åŒ—å¸‚ä¸­æ­£å€',
    distance: '700m',
    intro: 'ç°¡ç´„ç”Ÿæ´»ä¸­çš„æŸ”è»Ÿå°ç¢ºå¹¸ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'é›²é–“ç¾å­¸',
    lat: 22.6272, lng: 120.3016,
    image: 'https://images.unsplash.com/photo-1599940824391-8f2a7d52935c',
    time: '10:30 - 19:00',
    services: 'å€‹æ€§å‡è†  / å½©ç¹ªé€ å‹',
    reservation: 'LINE è¯çµ¡',
    region: 'é«˜é›„å¸‚å‰é‡‘å€',
    distance: '1.3km',
    intro: 'è‡ªç”±éˆé­‚çš„é¡è‰²å¯¦é©—å®¤ï¼Œå¦³çš„é¢¨æ ¼å¦³ä¾†å®šç¾©ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },  {
    name: 'æ©˜å…‰å·¥ä½œå®¤',
    lat: 24.9555, lng: 121.2167,
    image: 'https://images.unsplash.com/photo-1607746882042-944635dfe10e',
    time: '09:30 - 18:30',
    services: 'æ¥µç°¡ç¾ç”² / æŒ‡ç·£ä¿®è­·',
    reservation: 'LINE é ç´„',
    region: 'æ–°ç«¹ç¸£ç«¹åŒ—å¸‚',
    distance: '1.6km',
    intro: 'ç°¡ç´„ä¸­è¦‹ç²¾ç·»ï¼Œå–œæ­¡è‡ªç„¶æ„Ÿçš„å¦³æœƒæ„›ä¸Šã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'èŠ½èŠ½ç«æ¯›åŠ',
    lat: 24.1641, lng: 120.6361,
    image: 'https://images.unsplash.com/photo-1587005065981-1e8e682938d6',
    time: '12:00 - 21:00',
    services: 'æ¿ƒå¯†æ¥ç« / ç«æ¯›è­·ç†',
    reservation: 'IG é ç´„é€£çµ',
    region: 'å°ä¸­å¸‚å—å€',
    distance: '2.1km',
    intro: 'å°ˆå±¬å®¢è£½çœ¼å‹æ­é…ï¼Œè‡ªç„¶èˆ‡æ¿ƒå¯†å…¼å…·ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'ç¹­å±… Nail&Life',
    lat: 23.9739, lng: 120.9820,
    image: 'https://images.unsplash.com/photo-1594561465259-fbc0d3016c56',
    time: '14:00 - 22:00',
    services: 'ç™‚ç™’ç³»ç¾ç”² / è‡ªç„¶è­·ç†',
    reservation: 'LINE é ç´„',
    region: 'å—æŠ•å¸‚',
    distance: '3.4km',
    intro: 'åƒç¹­ä¸€æ¨£æº«æŸ”åŒ…è¦†çš„ç¾å­¸å°å¤©åœ°ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'æ™´å­å·¥ä½œåŠ',
    lat: 22.6208, lng: 120.3123,
    image: 'https://images.unsplash.com/photo-1615371959759-47349de4b3ae',
    time: '10:00 - 19:30',
    services: 'æŒ‡å°–è¨­è¨ˆ / æ¸…æ–°é¢¨æ ¼',
    reservation: 'è¡¨å–®å¡«å¯«',
    region: 'é«˜é›„å¸‚è‹“é›…å€',
    distance: '1.9km',
    intro: 'æ¯æ¬¡é€ è¨ªéƒ½åƒé™½å…‰ç‘é€²å¿ƒè£¡ï¼Œå……æ»¿èƒ½é‡çš„ç©ºé–“ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'è“æœç”œå¿ƒç¾ç”²',
    lat: 25.0173, lng: 121.4637,
    image: 'https://images.unsplash.com/photo-1599945468073-c844865d55ce',
    time: '11:00 - 21:00',
    services: 'å°‘å¥³ç³»å‡è†  / å½©ç¹ªè²¼ç´™',
    reservation: 'IG ç§è¨Š',
    region: 'æ–°åŒ—å¸‚æ¿æ©‹å€',
    distance: '950m',
    intro: 'å¤¢å¹»å°‘å¥³å¿ƒé›†æ•£åœ°ï¼Œç²‰å«©æ§çš„å¤©å ‚ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'å°äº• Nail Life',
    lat: 23.6981, lng: 120.5348,
    image: 'https://images.unsplash.com/photo-1588776813716-35aee4eb865a',
    time: '13:00 - 21:00',
    services: 'æ¥µç°¡é¢¨ / å®¢è£½å½©ç¹ª',
    reservation: 'LINE é ç´„',
    region: 'å½°åŒ–ç¸£å“¡æ—å¸‚',
    distance: '2.9km',
    intro: 'åœ¨å°äº•é‡è¦‹æº«æŸ”ï¼Œè¨­è¨ˆå¾å¦³çš„æ•…äº‹å‡ºç™¼ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'æ¨‚æ¨‚æ—¥å¼ç¾ç«',
    lat: 24.9715, lng: 121.1911,
    image: 'https://images.unsplash.com/photo-1606112219348-204d7d8b94ee',
    time: '09:00 - 18:00',
    services: 'è¼•æ„Ÿç«æ¯› / æ—¥å¼åˆ†æ®µæŠ€æ³•',
    reservation: 'LINE é ç´„',
    region: 'æ¡ƒåœ’å¸‚æ¥Šæ¢…å€',
    distance: '1.2km',
    intro: 'æ³¨é‡èˆ’é©èˆ‡è³ªæ„Ÿå…¼å…·çš„æ—¥å¼ç«æ¯›å°ˆé–€åº—ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'å–µå–µ Nail Lab',
    lat: 24.8138, lng: 121.0291,
    image: 'https://images.unsplash.com/photo-1590080876211-bc0cb9bd7521',
    time: '12:00 - 21:30',
    services: 'æ‰‹è¶³å‡è†  / å‹•ç‰©åœ–æ¡ˆ',
    reservation: 'IG ç§è¨Š',
    region: 'æ–°ç«¹å¸‚åŒ—å€',
    distance: '800m',
    intro: 'ä¸»æ‰“å¯æ„›æ‰‹ç¹ªå‹•ç‰©åœ–æ¨£ï¼Œå–œæ­¡è²“è²“ç‹—ç‹—çœ‹é€™é‚Šï¼',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'å³¶å…‰ç¾ç”²',
    lat: 23.5692, lng: 119.5797,
    image: 'https://images.unsplash.com/photo-1625187494659-b3f91a3b1ff5',
    time: '10:30 - 19:30',
    services: 'å‡è† æŒ‡å½© / æµ·ç³»é¢¨æ ¼',
    reservation: 'è¡¨å–®é ç´„',
    region: 'æ¾æ¹–ç¸£é¦¬å…¬å¸‚',
    distance: '5.1km',
    intro: 'éˆæ„Ÿä¾†è‡ªå³¶å¶¼æ—¥å…‰ï¼Œå°ˆå±¬ä½ çš„å¤æ—¥è‰²å½©ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  },
  {
    name: 'ç©ºç™½ç¾ç«æ‰€',
    lat: 25.0517, lng: 121.5380,
    image: 'https://images.unsplash.com/photo-1613565438585-d90a6fa9c8a6',
    time: '11:00 - 20:00',
    services: 'è¼•ç¾½æ¥ç« / çœ¼å‹è¨­è¨ˆ',
    reservation: 'LINE é ç´„',
    region: 'å°åŒ—å¸‚ä¸­å±±å€',
    distance: '350m',
    intro: 'æ¥µç°¡ç³»ç«æ¯›ç©ºé–“ï¼Œè®“å¦³çš„çœ¼ç¥ä¿æœ‰ç´”ç²¹ã€‚',
    ig: '#', line: '#', nav: '#', book: '#'
  }
    ];
    const markers = [];

    function initMap() {
      navigator.geolocation.getCurrentPosition(pos => {
        const userPos = {
          lat: pos.coords.latitude,
          lng: pos.coords.longitude
        };
        map = new google.maps.Map(document.getElementById('map'), {
          center: userPos, zoom: 14,
        });
        userMarker = new google.maps.Marker({
          position: userPos,
          map: map,
          title: 'ä½ åœ¨é€™è£¡',
          icon: {
            path: google.maps.SymbolPath.CIRCLE,
            scale: 8,
            fillColor: '#4285F4',
            fillOpacity: 1,
            strokeWeight: 2,
            strokeColor: '#fff'
          }
        });
        stores.forEach((store, index) => {
          const marker = new google.maps.Marker({
            position: { lat: store.lat, lng: store.lng },
            map: map,
            title: store.name
          });
          markers.push(marker);
        });
        renderCards();
        updateCardUI(0);
        // ğŸ” æ»‘å‹•å¡ç‰‡æ™‚è‡ªå‹•åµæ¸¬å°æ‡‰å¡ç‰‡ï¼Œä¸¦æ›´æ–°åœ°åœ–ä¸­å¿ƒèˆ‡è³‡æ–™
document.getElementById('cardWrapper').addEventListener('scroll', function () {
  const wrapper = this;
  const cards = wrapper.querySelectorAll('.store-card');
  let minDistance = Infinity;
  let closestIndex = 0;

  cards.forEach((card, index) => {
    const cardCenter = card.getBoundingClientRect().left + card.offsetWidth / 2;
    const wrapperCenter = wrapper.getBoundingClientRect().left + wrapper.offsetWidth / 2;
    const distance = Math.abs(cardCenter - wrapperCenter);
    if (distance < minDistance) {
      minDistance = distance;
      closestIndex = index;
    }
  });

  // è‹¥æ»‘å‹•åˆ°æ–°å¡ç‰‡å°±æ›´æ–°åœ°åœ–ä½ç½®
  if (closestIndex !== activeIndex) {
    updateCardUI(closestIndex, true);
  }
});
      });
    }

    function renderCards() {
      const wrapper = document.getElementById('cardWrapper');
      stores.forEach((s, i) => {
        const div = document.createElement('div');
        div.className = 'store-card';
div.innerHTML = `
 <img src="${s.image}" class="card-photo" />
  <div class="title">${s.name}</div>
  <div class="info">æ™‚é–“ï¼š${s.time}</div>
  <div class="info">æœå‹™ï¼š${s.services}</div>
  <div class="info">é ç´„ï¼š${s.reservation}</div>
  <div class="info">${s.distance}ãƒ»${s.region}</div>
`;
        div.onclick = () => updateCardUI(i, true);
        wrapper.appendChild(div);
      });
    }

    function updateCardUI(index, open = false) {
      activeIndex = index;
      const s = stores[index];
      map.panTo({ lat: s.lat, lng: s.lng });

} 

   function toggleWindow(id) {
  const target = document.getElementById(id);
  const isOpen = target.classList.contains('active');

  // å¦‚æœåŸæœ¬æ²’é–‹ï¼Œå°±é–‹ï¼›å·²é–‹å°±æ”¶èµ·
  if (!isOpen) {
    target.classList.add('active');
  }
}

    function closeWindow(id) {
      document.getElementById(id).classList.remove('active');
    }

    function centerOnGPS() {
      if (navigator.geolocation && map) {
        navigator.geolocation.getCurrentPosition(pos => {
          const userPos = { lat: pos.coords.latitude, lng: pos.coords.longitude };
          map.setCenter(userPos);
        });
      }
    }
    // DEBUG: å¼·åˆ¶å±•é–‹ç¬¬ä¸€ç­†å¡ç‰‡ä¾†ç¢ºèªå±•é–‹å¡ç‰‡æ˜¯å¦æœ‰ä½œç”¨
window.addEventListener('load', () => {
  setTimeout(() => {
    updateCardUI(0);
  }, 1000);
});

    
  </script>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBLCB3EKFwsIqPwEEL_hxL7zluVpnzcCNM&callback=initMap"></script>
</body>
</html>
