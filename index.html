<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tint Maps DEMO</title>
<!-- 🔽 你把這段貼在這裡 🔽 -->

<!-- Favicon 與 PWA App Icon 設定 -->
<link rel="manifest" href="./manifest.json" />
<link rel="apple-touch-icon" href="./img/icon_192.png" />
<link rel="icon" href="./img/icon_192.png" sizes="192x192" />
<link rel="icon" href="./img/icon_512.png" sizes="512x512" />
<meta name="theme-color" content="#ffffff" />

<!-- 🔼 上面貼完之後繼續接著下面這行 🔼 -->
  
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Noto Sans TC', sans-serif;
      height: 100%;
      overflow: hidden;
      background-color: #fefcf9;
    }
    #map {
      position: absolute;
      top: 0;
      bottom: 0;
      right: 0;
      left: 0;
      z-index: 1;
    }
    .bottom-nav {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #f5f2ec;
      border-radius: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      display: flex;
      gap: 28px;
      padding: 10px 20px;
      z-index: 10;
    }
    .nav-btn {
      background: none;
      border: none;
      padding: 6px;
      border-radius: 50%;
      transition: background 0.3s ease;
    }
    .nav-btn:hover {
      background: rgba(0,0,0,0.05);
    }

    /* 卡片、浮窗、展開卡片等容器設定 */
    .card-container {
      position: absolute;
      bottom: 100px;
      left: 0;
      right: 0;
      z-index: 5;
      display: flex;
      justify-content: center;
      overflow: hidden;
      pointer-events: none;
    }
    .card-wrapper {
      display: flex;
      gap: 12px;
      overflow-x: auto;
      padding: 0 20px;
      scroll-snap-type: x mandatory;
      pointer-events: all;
    }

    .store-card {
      flex: 0 0 280px;
      scroll-snap-align: center;
      background: #fffdf9;
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.08);
      padding: 16px;
      transition: transform 0.3s ease;
      cursor: pointer;
    }
    .store-card .title {
      font-weight: 600;
      font-size: 16px;
      margin-bottom: 4px;
      color: #4a453d;
    }
    .store-card .info {
      font-size: 14px;
      color: #7d756c;
    }

<!-- 第二份貼這裡 -->


        /* 展開卡片與浮窗 */
    .expanded-card {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%) translateY(100%);
      width: 90%;
      max-width: 400px;
      background: #fffefb;
      border-radius: 20px;
      box-shadow: 0 8px 18px rgba(0,0,0,0.15);
      z-index: 15;
      opacity: 0;
      transition: transform 0.4s ease, opacity 0.4s ease;
    }
    .expanded-card.active {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
    .expanded-card img {
      width: 100%;
      height: 160px;
      object-fit: cover;
      border-radius: 20px 20px 0 0;
    }
    .expanded-card .details {
      padding: 16px;
    }
    .expanded-card .details h3 {
      margin: 0 0 6px;
      font-size: 18px;
      color: #3e3a36;
    }
    .expanded-card .details p {
      margin: 6px 0;
      font-size: 14px;
      color: #665d55;
    }
    .action-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 12px;
    }
    .action-buttons .icon-btn {
      width: 48px;
      height: 48px;
      background: #f5f2ec;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }
    .action-buttons .icon-btn:hover {
      transform: scale(1.08);
    }

    .floating-window {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%) translateY(100%);
      background: rgba(255, 255, 255, 0.97);
      width: 90%;
      max-width: 400px;
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.12);
      padding: 20px;
      z-index: 20;
      opacity: 0;
      transition: transform 0.3s ease, opacity 0.3s ease;
    }
    .floating-window.active {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
    .floating-window .close-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      background: none;
      border: none;
      font-size: 18px;
      color: #999;
      cursor: pointer;
    }

    /* Scroll bar hidden for webkit */
    .card-wrapper::-webkit-scrollbar {
      display: none;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <!-- 展開卡片容器 -->
  <div id="expandedCard" class="expanded-card">
    <img id="cardImage" src="" alt="店家照片">
    <div class="details">
      <h3 id="cardTitle">店名</h3>
      <p id="cardTime">營業時間</p>
      <p id="cardServices">服務項目</p>
      <p id="cardAbout">店家介紹</p>
      <div class="action-buttons">
        <a id="btnLine" class="icon-btn" target="_blank" title="LINE">
          <svg viewBox="0 0 24 24" width="22" height="22" stroke="#7f7263" fill="none" stroke-width="2"><path d="M3 12a9 9 0 0118 0c0 4.418-3.582 8-8 8h-1l-4 2v-2H8a9 9 0 01-5-8z"/></svg>
        </a>
        <a id="btnIG" class="icon-btn" target="_blank" title="Instagram">
          <svg viewBox="0 0 24 24" width="22" height="22" stroke="#7f7263" fill="none" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="5"/><circle cx="12" cy="12" r="4"/><line x1="17" y1="7" x2="17" y2="7"/></svg>
        </a>
        <a id="btnNav" class="icon-btn" target="_blank" title="導航">
          <svg viewBox="0 0 24 24" width="22" height="22" stroke="#7f7263" fill="none" stroke-width="2"><polygon points="12 2 19 21 12 17 5 21 12 2"/></svg>
        </a>
        <a id="btnBook" class="icon-btn" target="_blank" title="立即預約">
          <svg viewBox="0 0 24 24" width="22" height="22" stroke="#7f7263" fill="none" stroke-width="2"><path d="M4 4h16v16H4z"/><path d="M4 10h16"/></svg>
        </a>
      </div>
    </div>
  </div>

<!-- 第三份貼這裡 -->


    <!-- 店家卡片滑動容器 -->
  <div class="card-container">
    <div class="card-wrapper" id="cardWrapper">
      <!-- JS會動態插入卡片 -->
    </div>
  </div>

  <!-- 浮窗區塊：搜尋 / 收藏 / 選單 -->
  <div id="searchWindow" class="floating-window">
    <button class="close-btn" onclick="closeWindow('searchWindow')">×</button>
    <h3>搜尋與篩選</h3>
    <input type="text" placeholder="搜尋地區、關鍵字..." style="width:100%;padding:10px;border-radius:8px;border:1px solid #ccc;margin:12px 0;" />
    <p style="font-size:14px;color:#666;">可篩選：地區 / 類型 / 預約方式</p>
  </div>
  <div id="favoriteWindow" class="floating-window">
    <button class="close-btn" onclick="closeWindow('favoriteWindow')">×</button>
    <h3>收藏清單</h3>
    <p>尚無收藏的店家</p>
  </div>
  <div id="menuWindow" class="floating-window">
    <button class="close-btn" onclick="closeWindow('menuWindow')">×</button>
    <h3>更多選項</h3>
    <p>功能建置中</p>
  </div>

  <!-- 底部選單 -->
  <div class="bottom-nav">
    <button class="nav-btn" onclick="toggleWindow('searchWindow')">
      <svg viewBox="0 0 24 24" width="26" height="26" stroke="#7b6e64" fill="none" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
    </button>
    <button class="nav-btn" onclick="centerOnGPS()">
      <svg viewBox="0 0 24 24" width="26" height="26" stroke="#7b6e64" fill="none" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/></svg>
    </button>
    <button class="nav-btn" onclick="closeExpandedCard()">
      <svg viewBox="0 0 24 24" width="26" height="26" stroke="#7b6e64" fill="none" stroke-width="2"><path d="M3 11L12 4l9 7"/><path d="M9 21V12h6v9"/></svg>
    </button>
    <button class="nav-btn" onclick="toggleWindow('favoriteWindow')">
      <svg viewBox="0 0 24 24" width="26" height="26" fill="#7b6e64"><path d="M12 21C12 21 5 14.8 5 9.5C5 6.42 7.42 4 10.5 4C12.24 4 13.91 4.81 15 6.08C16.09 4.81 17.76 4 19.5 4C22.58 4 25 6.42 25 9.5C25 14.8 18 21 18 21H12Z"/></svg>
    </button>
    <button class="nav-btn" onclick="toggleWindow('menuWindow')">
      <svg viewBox="0 0 24 24" width="26" height="26" stroke="#7b6e64" fill="none" stroke-width="2"><line x1="4" y1="6" x2="20" y2="6"/><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="18" x2="20" y2="18"/></svg>
    </button>
  </div>

  <!-- Google Maps JS + 假資料與互動邏輯 -->
  <script>
    let map, userMarker, activeIndex = 0;
    const stores = [
      {
        name: '柔柔美甲小舖',
        lat: 25.0452, lng: 121.5318,
        image: 'https://images.unsplash.com/photo-1606312619344-500082ba8de6',
        time: '11:00 - 20:00',
        services: '美甲 / 凝膠 / 手護理',
        intro: '一間專屬女生的柔美空間，提供高質感凝膠造型與客製設計。',
        ig: 'https://instagram.com',
        line: 'https://line.me',
        nav: 'https://maps.google.com?q=25.0452,121.5318',
        book: '#'
      },
      {
        name: '小南美睫空間',
        lat: 24.1477, lng: 120.6736,
        image: 'https://images.unsplash.com/photo-1594737625785-cdfebd7a9d0a',
        time: '10:00 - 19:00',
        services: '日式美睫 / 卸睫 / 保養',
        intro: '專業美睫師為您打造自然感電眼，舒適空間放鬆享受。',
        ig: '#', line: '#', nav: '#', book: '#'
      },
      {
        name: '粉棕工作室',
        lat: 22.6273, lng: 120.3014,
        image: 'https://images.unsplash.com/photo-1589998059171-988d887df646',
        time: '12:00 - 21:00',
        services: '美甲 / 預約制 / 獨立空間',
        intro: '藏身市中心的秘密工作室，適合享受靜謐服務的妳。',
        ig: '#', line: '#', nav: '#', book: '#'
      }
    ];
    const markers = [];

    function initMap() {
      navigator.geolocation.getCurrentPosition(pos => {
        const userPos = {
          lat: pos.coords.latitude,
          lng: pos.coords.longitude
        };
        map = new google.maps.Map(document.getElementById('map'), {
          center: userPos, zoom: 14,
        });
        userMarker = new google.maps.Marker({
          position: userPos,
          map: map,
          title: '你在這裡',
          icon: {
            path: google.maps.SymbolPath.CIRCLE,
            scale: 8,
            fillColor: '#4285F4',
            fillOpacity: 1,
            strokeWeight: 2,
            strokeColor: '#fff'
          }
        });
        stores.forEach((store, index) => {
          const marker = new google.maps.Marker({
            position: { lat: store.lat, lng: store.lng },
            map: map,
            title: store.name
          });
          markers.push(marker);
        });
        renderCards();
        updateCardUI(0);
      });
    }

    function renderCards() {
      const wrapper = document.getElementById('cardWrapper');
      stores.forEach((s, i) => {
        const div = document.createElement('div');
        div.className = 'store-card';
        div.innerHTML = `
          <div class="title">${s.name}</div>
          <div class="info">${s.services}</div>
          <div class="info">距離：約 1km</div>
        `;
        div.onclick = () => updateCardUI(i, true);
        wrapper.appendChild(div);
      });
    }

    function updateCardUI(index, open = false) {
      activeIndex = index;
      const s = stores[index];
      document.getElementById('cardImage').src = s.image;
      document.getElementById('cardTitle').textContent = s.name;
      document.getElementById('cardTime').textContent = s.time;
      document.getElementById('cardServices').textContent = s.services;
      document.getElementById('cardAbout').textContent = s.intro;
      document.getElementById('btnIG').href = s.ig;
      document.getElementById('btnLine').href = s.line;
      document.getElementById('btnNav').href = s.nav;
      document.getElementById('btnBook').href = s.book;
      map.setCenter({ lat: s.lat, lng: s.lng });
      if (open) document.getElementById('expandedCard').classList.add('active');
    }

    function closeExpandedCard() {
      document.getElementById('expandedCard').classList.remove('active');
    }

    function toggleWindow(id) {
      closeExpandedCard();
      document.querySelectorAll('.floating-window').forEach(w => w.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function closeWindow(id) {
      document.getElementById(id).classList.remove('active');
    }

    function centerOnGPS() {
      if (navigator.geolocation && map) {
        navigator.geolocation.getCurrentPosition(pos => {
          const userPos = { lat: pos.coords.latitude, lng: pos.coords.longitude };
          map.setCenter(userPos);
        });
      }
    }
  </script>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBLCB3EKFwsIqPwEEL_hxL7zluVpnzcCNM&callback=initMap"></script>
</body>
</html>
